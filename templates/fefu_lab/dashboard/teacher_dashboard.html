{% extends "fefu_lab/base.html" %}

{% block title %}{{ title }}{% endblock %}
{% block heading %}{{ title }}{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h2>Добро пожаловать, {{ teacher.full_name }}!</h2>
        <p>Панель управления вашими курсами и студентами</p>
    </div>
    
    <div class="dashboard-stats">
        <div class="stat-card">
            <h3>{{ course_stats|length }}</h3>
            <p>Активных курсов</p>
        </div>
        <div class="stat-card">
            <h3>{{ course_stats|length }}</h3>
            <p>Всего студентов</p>
        </div>
    </div>
    
    {% if course_stats %}
    <div class="courses-section">
        <h3>Мои курсы</h3>
        <div class="courses-grid">
            {% for stat in course_stats %}
            <div class="course-card">
                <h4>{{ stat.course.title }}</h4>
                <p><strong>Студентов:</strong> {{ stat.students_count }}/{{ stat.course.max_students }}</p>
                <p><strong>Свободных мест:</strong> {{ stat.available_seats }}</p>
                <p><strong>Уровень:</strong> {{ stat.course.get_level_display }}</p>
                <div class="course-actions">
                    <a href="{% url 'course_detail' stat.course.slug %}" class="btn">Просмотр</a>
                    <a href="/admin/fefu_lab/course/{{ stat.course.id }}/change/" class="btn">Редактировать</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="empty-state">
        <h3>У вас пока нет активных курсов</h3>
        <p>Создайте новый курс через административную панель</p>
        <a href="/admin/fefu_lab/course/add/" class="btn">Создать курс</a>
    </div>
    {% endif %}
</div>

<style>
.course-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}
.course-actions .btn {
    flex: 1;
    padding: 8px 12px;
    font-size: 14px;
}
</style>
{% endblock %}